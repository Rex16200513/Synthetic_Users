
# Synthetic User Lab - 合成用户实验室

## 项目概述

Synthetic User Lab 是一个基于 AI 的用户反馈工具，能够从真实用户评论中生成具有记忆和反思能力的合成用户角色，帮助设计师在没有真实用户参与的情况下获取多样化的设计反馈。

### 核心价值

- **真实感反馈**：基于真实用户评论生成的合成用户，能够提供贴近真实用户的反馈
- **多样化视角**：同时生成 3 种不同类型的用户角色，提供多维度的设计评价
- **记忆与反思**：合成用户具备长期记忆和周期性反思能力，能够根据对话历史更新认知
- **设计迭代支持**：支持文本和图片输入，方便设计师展示设计并获取反馈
- **自定义数据**：支持上传自定义 JSON 数据，生成特定场景下的合成用户

## 技术栈

- React 19.2.0
- TypeScript 5.8.2
- Vite 6.2.0
- Google Gemini API
- Tailwind CSS

## 安装和运行

### 前提条件

- Node.js 18+ 环境
- Google Gemini API 密钥

### 安装步骤

1. **克隆项目**

2. **安装依赖**
   ```bash
   npm install
   ```

3. **配置 API 密钥**
   - 在项目根目录创建 `.env.local` 文件
   - 添加以下内容：
     ```
     GEMINI_API_KEY=your-gemini-api-key
     ```

4. **启动开发服务器**
   ```bash
   npm run dev
   ```

5. **访问应用**
   - 打开浏览器，访问 `http://localhost:3000/`

## 核心功能

### 1. 合成用户生成

应用默认使用内置的 200 条真实用户评论数据，生成 3 种不同类型的合成用户角色：

- **隐私与边界捍卫者**：关注隐私、数据安全和骚扰电话
- **实用主义/小白用户**：关注易用性、界面清晰度和操作便捷性
- **高频商务旅客**：关注效率、无广告干扰和简洁流程

### 2. 智能对话交互

- **文本输入**：向合成用户提问或描述设计方案
- **图片上传**：上传设计界面截图，获取视觉设计反馈
- **实时响应**：合成用户会根据对话历史和记忆生成响应

### 3. 记忆与反思机制

- **短期记忆**：合成用户会记住最近的对话内容
- **长期信念**：每 5 轮对话后，合成用户会进行深度反思，更新长期信念
- **认知演化**：反思结果会影响后续对话，形成闭环反馈机制

### 4. 自定义数据支持

- 支持上传自定义 JSON 格式的用户评论数据
- 上传后会自动生成新的合成用户角色
- 支持的数据格式参考 `constants.ts` 文件中的 `AppData` 类型

## 使用指南

### 1. 初始状态

应用启动后，会自动加载默认数据并生成 3 个合成用户角色。顶部会显示一个系统消息，提示焦点小组已就位。

### 2. 与合成用户交互

1. **输入文本**：在底部输入框中输入问题或描述设计方案
2. **上传图片**：点击左侧的上传图标，选择设计界面截图
3. **发送消息**：点击发送按钮或按 Enter 键发送消息
4. **查看响应**：合成用户会依次生成响应，显示在聊天窗口中

### 3. 上传自定义数据

1. **准备 JSON 文件**：确保文件格式符合 `AppData` 类型要求
2. **点击上传按钮**：点击顶部右侧的「上传JSON数据」按钮
3. **选择文件**：从本地选择准备好的 JSON 文件
4. **等待生成**：系统会根据新数据生成新的合成用户角色
5. **查看状态**：上传成功后会显示「✅ 自定义数据已加载」的提示

### 4. 观察反思过程

- 每 5 轮对话后，系统会自动进入反思模式
- 反思期间会显示「🧠 正在进行周期性反思」的提示
- 反思完成后，合成用户的长期信念会更新
- 反思结果会影响后续对话的响应

## 数据格式说明

自定义 JSON 数据需要符合以下格式：

```json
{
  "app_info": {
    "name": "应用名称",
    "version": "版本号"
  },
  "reviews": [
    {
      "author": "用户名称",
      "rating": 1-5,
      "title": "评论标题",
      "content": "评论内容",
      "version": "应用版本",
      "date": "评论日期"
    }
    // 更多评论...
  ]
}
```

## 工作原理

### 1. 合成用户生成

- 应用使用 Google Gemini API 分析用户评论
- 根据评论内容生成 3 种不同类型的用户角色
- 每个角色包含详细的背景、痛点、目标和系统指令

### 2. 对话生成

- 系统将对话历史和当前输入发送给 Gemini API
- 合成用户根据自己的角色和记忆生成响应
- 响应包含具体的问题指出和改进建议

### 3. 反思机制

- 定期分析对话历史，提炼高阶观点
- 更新合成用户的长期信念
- 信念影响后续对话的响应方式

## 项目结构

```
.
├── services/
│   └── geminiService.ts        # Gemini API 服务
├── App.tsx                     # 主应用组件
├── constants.ts                # 常量数据（包含默认用户评论）
├── types.ts                    # 类型定义
├── index.html                  # HTML 入口
├── index.tsx                   # React 入口
├── package.json                # 项目配置
└── tsconfig.json               # TypeScript 配置
```

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！
